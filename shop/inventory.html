<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Inventory</title>
  <link rel="stylesheet" href="../css/style.css" />
  <script defer src="../js/common.js"></script>
  <script>
    function render() {
      const inv = invFor('shop');
      const container = document.querySelector('#list');
      container.innerHTML = '';

      if (!inv.items || inv.items.length === 0) {
        container.innerHTML = '<li class="small">No items yet. Play to earn coins, then buy from the store.</li>';
        return;
      }

      inv.items.forEach(n => {
        const li = document.createElement('li');
        li.className = 'card flex';

        // Handle both string (old inventory) and object (new inventory)
        let name = '';
        let img = '../assets/egg.png';
        if (typeof n === 'string') {
          name = n;
        } else if (typeof n === 'object') {
          name = n.name;
          img = n.img || img;
        }

        li.innerHTML = `
          <img class="thumb" src="${img}" />
          <div class="info">
            <h2>${name}</h2>
          </div>
        `;
        container.appendChild(li);
      });
    }

    document.addEventListener('DOMContentLoaded', render);
  </script>
</head>

<body>
  <div class="nav">
    <div class="inner"><a href="../index.html">Home</a><a href="index.html">Math Market</a>
      <div style="margin-left:auto" class="kpi">ðŸ’° <strong data-wallet>0</strong> pts</div>
    </div>
  </div>
  <div class="container fade-in">
    <h1>Your Inventory</h1>
    <ul id="list" class="grid"></ul>
  </div>
</body>

</html>