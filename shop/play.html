<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shop â€¢ Play</title>
  <link rel="stylesheet" href="../css/style.css" />
  <script defer src="../js/common.js"></script>
  <script type="module">
    import { makeGame } from '../js/game.js';
    document.addEventListener('DOMContentLoaded', () => {
      const level = Number(new URLSearchParams(location.search).get('level') || '1');
      makeGame(document.querySelector('#game'), {
        theme: 'shop', level,
        onEnd: ({ score }) => {
          addWallet(score);
          const inv = invFor('shop'); inv.lastEarned = (inv.lastEarned || 0) + score; saveInv('shop', inv);
          document.querySelector('#end').innerHTML = `<div class='card center fade-in'>
        <h2>Shift Complete</h2><p>You earned <strong>${score}</strong> shop coins.</p>
        <a class='btn success' href='store.html'>Go to Store</a>
        <a class='btn' href='play.html'>Play Again</a>
      </div>`;
        }
      });
    });
  </script>
</head>

<body>
  <div class="nav">
    <div class="inner"><a href="../index.html">Home</a><a href="index.html">Math Market</a>
      <div style="margin-left:auto" class="kpi">ðŸ’° <strong data-wallet>0</strong> pts</div>
    </div>
  </div>
  <div class="container fade-in">
    <h1>Shop â€¢ Play</h1>
    <div class="flex"><label>Level
        <select onchange="location.search='?level='+this.value">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select></label>
      <span class="small">60 seconds â€¢ +10 per correct</span>
    </div>
    <div id="game"></div>
    <div id="end" style="margin-top:16px"></div>
  </div>
</body>

</html>