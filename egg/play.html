<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Egg Play</title>
  <link rel="stylesheet" href="../css/style.css" />
  <script defer src="../js/common.js"></script>
  <script type="module">
    import { makeGame } from '../js/game.js';
    document.addEventListener('DOMContentLoaded', () => {
      const level = Number(new URLSearchParams(location.search).get('level') || '1');
      makeGame(document.querySelector('#game'), {
        theme: 'egg', level,
        onEnd: ({ score, wrongs }) => {
          addWallet(score);
          localStorage.setItem('egg_last_wrongs', JSON.stringify(wrongs));
          document.querySelector('#end').innerHTML = `<div class='card center fade-in'>
        <h2>Round Over</h2>
        <p>You earned <strong>${score}</strong> points.</p>
      
        <a class='btn' href='shop.html'>Go To Shop</a>
        <a class='btn' href='play.html'>Play Again</a>
      </div>`;
        }
      });
    });
  </script>
</head>

<body>
  <div class="nav">
    <div class="inner">
      <a href="../index.html">Home</a>
      <a href="index.html">Egg Hatchery</a>
      <div style="margin-left:auto" class="kpi">ðŸ’° <strong data-wallet>0</strong> pts</div>
    </div>
  </div>
  <div class="container fade-in">
    <h1>Egg Hatchery â€¢ Play</h1>
    <div class="flex"><label>Level
        <select onchange="location.search='?level='+this.value">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select></label>
      <span class="small">60 seconds â€¢ +10 per correct</span>
    </div>
    <div id="game"></div>
    <div id="end" style="margin-top:16px"></div>
  </div>
</body>

</html>